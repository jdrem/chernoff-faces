/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java-library'
    id 'maven-publish'
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}

group = 'net.remgant'
version = '2.0.0'
description = 'chernoff-faces'

sourceSets {
    java9 {
        java {
            srcDirs = ['src/main/java9']
        }
    }
}

dependencies {
    java9Implementation files(sourceSets.main.output.classesDirs) {builtBy compileJava}
}

compileJava {
    sourceCompatibility = 8
    targetCompatibility = 8
    options.compilerArgs.addAll(['--release', '8'])
}

compileJava9Java {
    sourceCompatibility = 9
    targetCompatibility = 9
    options.compilerArgs.addAll(['--release', '9'])
}

jar {
    into('META-INF/versions/9') {
        from sourceSets.java9.output
        // Remove the Null class file and its dirs; we only needed it to compile the java9 sourceSet
        exclude('net')
    }
    manifest {
        attributes(
                "Manifest-Version": "1.0",
                "Multi-Release":true
        )
    }
}

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}
